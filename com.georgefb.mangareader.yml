---
app-id: com.georgefb.mangareader
runtime: org.kde.Platform
runtime-version: 6.10
sdk: org.kde.Sdk
command: mangareader
rename-icon: mangareader
copy-icon: true
finish-args:
  - --share=ipc
  - --socket=wayland
  - --socket=fallback-x11
  - --device=dri
  - --filesystem=host:ro
  - --filesystem=home
modules:
  - name: mangareader
    buildsystem: cmake-ninja
    post-install:
      - install -Dm644 -t /app/share/licenses/${FLATPAK_ID} LICENSES/*
    sources:
      - type: archive
        url: https://github.com/g-fb/mangareader/archive/refs/tags/2.3.0.tar.gz
        sha256: a15b1677ebb3f537bd069fd9ebf9c9011dc3e82a4a1071d501da231ea2fbc8a8

  - name: karchive
    buildsystem: cmake-ninja
    sources:
      - type: archive
        url: https://download.kde.org/stable/frameworks/6.22/karchive-6.22.0.tar.xz
        sha256: 84254bd0a51ff3d5e2fa22bb946309cec508f1fae726a7aea15149260c4db59d
      - type: patch
        path: karchive-use-correct-variable.diff
        x-checker-data:
          type: anitya
          project-id: 8762
          url-template: https://download.kde.org/stable/frameworks/$version/karchive-$version.tar.xz

  - name: unrar
    no-autogen: true
    make-install-args:
      - DESTDIR=/app
    sources:
      - type: archive
        url: https://www.rarlab.com/rar/unrarsrc-7.2.4.tar.gz
        sha256: b02e571a33af7711cd803080500370dc1d28eea82b2032480819d27462ad8b31
        x-checker-data:
          type: anitya
          project-id: 13306
          url-template: https://www.rarlab.com/rar/unrarsrc-$version.tar.gz
