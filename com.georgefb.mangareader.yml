---
app-id: com.georgefb.mangareader
runtime: org.kde.Platform
runtime-version: '5.15-21.08'
sdk: org.kde.Sdk
command: mangareader
rename-icon: mangareader
copy-icon: true
finish-args:
  - '--share=ipc'
  - '--socket=x11'
  - '--socket=wayland'
  - '--device=dri'
  - '--filesystem=host'
  - '--talk-name=ca.desrt.dconf'
modules:
  - name: mangareader
    buildsystem: cmake-ninja
    config-opts: 
      - '-DUseFetchContent=OFF'
    sources:
      - type: archive
        url: 'https://gitlab.com/g-fb/mangareader/-/archive/1.6.0/mangareader-1.6.0.tar.gz'
        sha256: '3f1fd1af49d571029fe332daa8b14a3c7df2533adb8bb1bb52641ab20ae4849c'
      - type: patch
        path: '0001-increment-mangareaderui.rc-version.patch'
    modules:
      - name: QArchive
        buildsystem: cmake-ninja
        config-opts:
          - '-DQARCHIVE_STATIC=OFF'
        sources:
        - type: archive
          url: 'https://github.com/antony-jr/QArchive/archive/refs/tags/v2.1.1.tar.gz'
          sha256: '4ed51121a5bc9b5981d2fa3927f951a6a91ccca233d6b6dc4fef55b4ca5a2d92'
          
  - name: unrar
    no-autogen: true
    make-install-args:
      - DESTDIR=/app
    sources:
      - type: archive
        url: 'https://www.rarlab.com/rar/unrarsrc-6.1.2.tar.gz'
        sha256: '3e96421f568e438af6dcdaef717c48eb93b825d97058ebcb173b9bfc57807be3'
