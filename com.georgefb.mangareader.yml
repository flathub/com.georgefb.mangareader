app-id: com.georgefb.mangareader
runtime: org.kde.Platform
runtime-version: '5.14'
sdk: org.kde.Sdk
command: mangareader
rename-icon: mangareader
copy-icon: true
finish-args:
  - '--share=ipc'
  - '--socket=x11'
  - '--socket=wayland'
  - '--device=dri'
  - '--filesystem=host'
  - '--talk-name=ca.desrt.dconf'
modules:
  - name: libarchive
    config-opts:
      - '--without-xml2'
    sources:
      - type: archive
        url: 'https://www.libarchive.de/downloads/libarchive-3.4.2.zip'
        sha256: 9af28a8e88baa0d25123122ea4661478726f0544cee826a22b1db1feed3c01e2
  - name: unrar
    no-autogen: true
    make-install-args:
      - DESTDIR=/app
    sources:
      - type: archive
        url: 'http://www.rarlab.com/rar/unrarsrc-5.9.1.tar.gz'
        sha256: 0eb1d1b8e02102fccae775a6d6b79336b69e2cf90e2045de92594dcfb58de100
  - name: Manga-Reader
    buildsystem: cmake-ninja
    sources:
      - type: git
        url: 'https://gitlab.com/g-fb/manga-reader/'
        tag: 1.2.0
      - type: patch
        path: 001-fix-placeholder-subtitution.patch
